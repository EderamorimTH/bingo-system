<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Display Público - Bingo</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="/socket.io/socket.io.js"></script>
<style>
body { background-color: #e6f7ff; text-align:center; }
h1 { color: #0d6efd; margin-top: 20px; }
.ultimos { display: flex; justify-content:center; gap:10px; margin-top:20px; }
.numero { width: 60px; height: 60px; display:flex; align-items:center; justify-content:center; background-color:#fd7e14; color:white; font-weight:bold; border-radius:10px; font-size:24px; }
.vencedor { margin-top:20px; color: green; font-weight:bold; font-size:18px; }
</style>
</head>
<body>

<h1>Bingo ao Vivo</h1>
<p><strong>Último número sorteado:</strong> <span id="ultimo">-</span></p>

<div class="ultimos" id="ultimos"></div>

<p><strong>Prêmio Atual:</strong> <span id="premio">-</span></p>

<div id="vencedores"></div>

<script>
const socket = io();

socket.on('numeroSorteado', data => {
    document.getElementById('ultimo').textContent = data.numero;
    const ultDiv = document.getElementById('ultimos');
    ultDiv.innerHTML = '';
    data.ultimosNumeros.forEach(n => {
        const div = document.createElement('div');
        div.classList.add('numero');
        div.textContent = n;
        ultDiv.appendChild(div);
    });
});

socket.on('premioAtualizado', premio => {
    document.getElementById('premio').textContent = premio;
});

socket.on('vencedoresAtualizados', vencedores => {
    const div = document.getElementById('vencedores');
    div.innerHTML = '';
    vencedores.forEach(v => {
        const p = document.createElement('p');
        p.classList.add('vencedor');
        p.textContent = `Cartela ${v.id} - Telefone: ${v.telefone.replace(/^(\d{2})\\d+(\\d{3})$/, "$1*****$2")} | Prêmio: ${v.premio}`;
        div.appendChild(p);
    });
});
</script>

</body>
</html>
